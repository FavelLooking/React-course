(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[669],{8254:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search/[page]",function(){return a(4972)}])},2711:function(e,t,a){"use strict";a.d(t,{a:function(){return l}});var n=a(5893),s=a(8037),c=a.n(s);function l(){return(0,n.jsx)("img",{className:c().loader,"data-testid":"loader",src:"/images/Planet-trans.gif",alt:"loader",width:"200",height:"200"})}a(7294)},4972:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSP:function(){return Z},default:function(){return z}});var n=a(5893),s=a(1720),c=a.n(s),l=a(7294),r=a(9282),o=a.n(r),i=a(5007),d=a(8440),u=a.n(d),_=a(4467),m=a.n(_),h=a(8112);let p=()=>{let e=(0,l.useContext)(h.N);if(!e)throw Error("useTheme must be used within a ThemeProvider");return e};var v=a(4996),f=a(2598),x=a(5306),j=a(1163);let b=e=>{let{serversideData:t}=e,[a,s]=(0,l.useState)(!1),[c,r]=(0,l.useState)(""),o=(0,j.useRouter)(),[d,_]=(0,l.useState)(!1),h=(0,i.I0)(),{isStandartTheme:b,changeTheme:y}=p(),N=async e=>{e.preventDefault(),_(!0);try{await o.push("/search/1?q=".concat(encodeURIComponent(c)))}finally{_(!1)}};return((0,l.useEffect)(()=>{t&&(h((0,f.K$)(t.page.totalPages)),h((0,x.i)(t)))},[t,h]),(0,l.useEffect)(()=>{h((0,v.A)(d))},[d,h]),a)?(0,n.jsx)("div",{children:"An error occurred. Please try again later."}):(0,n.jsxs)("form",{className:"".concat(u().header," ").concat(b?"":u().alternative),onSubmit:N,children:[(0,n.jsx)("input",{className:u().header__search,type:"text",placeholder:"Enter planet or star name",value:c,onChange:e=>r(e.target.value)}),(0,n.jsx)("button",{className:m().button,type:"submit",children:"Search"}),(0,n.jsx)("button",{className:m().button,type:"button",onClick:()=>{s(!a)},children:"Get Error"}),(0,n.jsx)("button",{className:m().button,type:"button",onClick:()=>{y()},children:"Next Theme"})]})};var y=a(4245),N=a.n(y),g=a(6319),C=a.n(g),I=a(7960);function k(e){let{title:t,location:a,astronomicalObjectType:s,onClick:c}=e,l=(0,i.I0)(),r=(0,i.v9)(e=>e.selectedItems.items.some(e=>e.title===t)),{isStandartTheme:o}=p();return(0,n.jsxs)("div",{className:"".concat(C()["card-container"]," ").concat(o?"":C().alternative),children:[(0,n.jsxs)("div",{"data-testid":"card-item",className:C()["card-item"],onClick:c,children:[(0,n.jsxs)("span",{className:C()["name-title"],children:["Name:"," ",(0,n.jsx)("span",{className:t.length>30?C()["title-small"]:C().title,children:t})]}),(0,n.jsxs)("span",{className:C()["location-title"],children:["Location:"," ",(0,n.jsx)("span",{className:a&&a.length>20?C()["location-small"]:C().location,children:a||"Unknown"})]}),(0,n.jsxs)("span",{className:C()["type-title"],children:["Object Type:"," ",(0,n.jsx)("span",{className:s.length>20?C()["type-small"]:C().type,children:s})]})]}),(0,n.jsx)("input",{type:"checkbox",className:C().checkbox,title:t,checked:r,onChange:()=>{let e={title:t,location:null!=a?a:"",object:s};r?l((0,I.cl)(e)):l((0,I.BF)(e))}})]})}var w=a(2126),S=a.n(w),E=a(6896);let F=()=>{let e=(0,l.useContext)(E.z);if(!e)throw Error("useClicked must be used within a ClickedProvider");return e};function M(){let{clicked:e}=F(),{isStandartTheme:t}=p(),a=(0,i.I0)(),s=(0,i.v9)(e=>e.pageSlice.page),c=(0,i.v9)(e=>e.pageSlice.totalPages),l=(0,j.useRouter)(),r=async e=>{let t=l.query.q?"?q=".concat(encodeURIComponent(l.query.q)):"?q=",n="/search/".concat(e).concat(t);a((0,v.A)(!0)),await l.push(n),a((0,v.A)(!1))};return(0,n.jsxs)("div",{className:"".concat(S().pagination," ").concat(t?"":S().alternative),children:[(0,n.jsx)("button",{className:m().button,onClick:()=>{a((0,f.IT)()),r(s-1)},disabled:e||1===s,children:"Previous"}),(0,n.jsxs)("span",{children:[s," of ",c]}),(0,n.jsx)("button",{className:m().button,onClick:()=>{a((0,f.fz)()),r(s+1)},disabled:e||s===c,children:"Next"})]})}var D=a(7314),O=a.n(D);function P(){let e=(0,i.I0)(),t=(0,i.v9)(e=>e.selectedItems.items.length>0),a=(0,i.v9)(e=>e.selectedItems.items.length),s=(0,i.v9)(e=>e.selectedItems.items),[c,r]=(0,l.useState)(null),o=(0,l.useRef)(null);(0,l.useEffect)(()=>{c&&o.current&&(o.current.click(),URL.revokeObjectURL(c),r(null))},[c]);let d=()=>{if(0===s.length)return"";let e=Object.keys(s[0]).join(";"),t=s.map(e=>Object.values(e).join(";")).join("\n");return"".concat(e,"\n").concat(t)};return(0,n.jsxs)("div",{className:t?O()["flyout-container"]:O()["flyout-container--hidden"],children:[(0,n.jsxs)("span",{children:[a," objects ",1===a?"is":"are"," selected"]}),(0,n.jsxs)("div",{className:O()["button-container"],children:[(0,n.jsx)("button",{type:"button",onClick:()=>{e((0,I.hF)())},className:"".concat(O().flyout__button," ").concat(m().button),children:"Unselect All"}),(0,n.jsx)("button",{type:"button",className:"".concat(O().flyout__button," ").concat(m().button),onClick:()=>{let e=new Blob([d()],{type:"text/csv"});r(URL.createObjectURL(e))},children:"Download"}),c&&(0,n.jsx)("a",{className:O().download,href:c,download:"".concat(a,"-Asctronomical-objects.csv"),ref:o,children:"Download"})]})]})}var T=a(2711);function q(e){let{onItemClick:t,hideDetails:a,serversideData:s}=e,{clicked:c,setClicked:l}=F(),{isStandartTheme:r}=p(),o=(0,i.v9)(e=>e.isLoading.isLoading);if(!s||o)return(0,n.jsx)("div",{className:"".concat(N().main," ").concat(r?"":N().alternative," "),children:(0,n.jsx)(T.a,{})});let d=e=>{l(!0),t(e)},{astronomicalObjects:u}=s;return(0,n.jsx)("div",{className:c?"".concat(N().main," ").concat(N()["details-active"]," ").concat(N()["card-small"]," ").concat(r?"":N().alternative):"".concat(N().main," ").concat(r?"":N().alternative," "),onClick:()=>{c&&(l(!1),a())},children:u&&u.length>0?(0,n.jsxs)(n.Fragment,{children:[u.map(e=>{var t;return(0,n.jsx)(k,{title:e.name,location:(null==e?void 0:null===(t=e.location)||void 0===t?void 0:t.name)||"",astronomicalObjectType:e.astronomicalObjectType,onClick:()=>d(e.uid)},e.uid)}),(0,n.jsx)(M,{}),(0,n.jsx)(P,{})]}):(0,n.jsx)("p",{className:N()["no-results"],children:"No search results found"})})}var A=a(407),U=a.n(A),R=a(7010);function L(e){let{onClose:t,serversideData:a}=e,s=(0,i.v9)(e=>e.currentDetails.currentId),c=(0,i.v9)(e=>e.currentDetails.details),{resetClicked:r}=F(),{isStandartTheme:o}=p(),[d,u]=(0,l.useState)(!0),_=(0,i.I0)();return((0,l.useEffect)(()=>{if(a&&a.astronomicalObjects&&s){let e=a.astronomicalObjects.find(e=>e.uid===s);e&&(_((0,R.v1)({name:e.name,location:e.location?e.location.name:"Unknown location",type:e.astronomicalObjectType})),u(!1))}},[s,a,_]),d)?(0,n.jsx)("div",{className:U()["main-content"],children:(0,n.jsx)(T.a,{})}):a?(0,n.jsxs)("div",{className:"".concat(U().details," ").concat(o?"":U().alternative),children:[(0,n.jsx)("h2",{children:c.name}),(0,n.jsx)("p",{children:c.type}),(0,n.jsx)("p",{children:c.location}),(0,n.jsx)("button",{className:m().button,onClick:()=>{t(),r()},children:"Close"})]}):null}class W extends l.Component{static getDerivedStateFromError(e){return{errorMessage:e.toString()}}render(){return this.state.errorMessage?(0,n.jsx)("p",{className:"error",children:"The universe is not favoring you today."}):this.props.children}constructor(...e){super(...e),this.state={errorMessage:""}}}var K=e=>{let{serversideData:t}=e,a=(0,j.useRouter)(),{page:s}=a.query,r=(0,i.I0)(),d=(0,i.v9)(e=>e.pageSlice.totalPages),u=(0,i.v9)(e=>e.currentDetails.currentId),_=(0,i.v9)(e=>e.pageSlice.page);l.useEffect(()=>{if(!s){a.push("/search/1?q=");return}let e=parseInt(s,10);isNaN(e)||e<=0||d&&e>d?a.push("/not-found"):r((0,f.o_)(e))},[s,a,d,r]);let m=()=>{r((0,R.Hf)("")),a.push("/search/".concat(_,"?q="))};return(0,n.jsxs)("div",{className:"".concat(o().wrapper," ").concat(c().className),"data-testid":"app-wrapper",children:[(0,n.jsx)(W,{children:(0,n.jsx)(b,{serversideData:t})}),(0,n.jsxs)("div",{className:o()["main-content"],"data-testid":"main-content",children:[(0,n.jsx)(q,{onItemClick:e=>{r((0,R.Hf)(e)),a.push("".concat(a.asPath.split("&")[0],"&details=").concat(e))},hideDetails:m,serversideData:t}),u&&(0,n.jsx)(L,{onClose:m,serversideData:t})]})]})},Z=!0,z=e=>{let{serversideData:t}=e;return(0,n.jsx)(K,{serversideData:t})}},4467:function(e){e.exports={button:"Button_button__OFOdO"}},6319:function(e){e.exports={"card-item":"CardItem_card-item__gQQDh",loader:"CardItem_loader__ZZKVC","name-title":"CardItem_name-title__TgUWf","location-title":"CardItem_location-title__G4Azo","type-title":"CardItem_type-title__txjBp",title:"CardItem_title__N4VAw",location:"CardItem_location__8yngN",type:"CardItem_type__ACW7P","title-small":"CardItem_title-small__XsdzW","location-small":"CardItem_location-small__YtxF0","type-small":"CardItem_type-small__svgPI",checkbox:"CardItem_checkbox__3lblu","card-container":"CardItem_card-container__ElJc3",alternative:"CardItem_alternative__Aqdaf"}},407:function(e){e.exports={details:"Details_details__SjFMq",alternative:"Details_alternative__fTbMs"}},7314:function(e){e.exports={"flyout-container":"Flyout_flyout-container__EBTg_","flyout-container--hidden":"Flyout_flyout-container--hidden__nZ_lL","button-container":"Flyout_button-container__KDW48",flyout__button:"Flyout_flyout__button__1oM0e",download:"Flyout_download__8mGnN"}},8440:function(e){e.exports={header:"Header_header__1RJ5C",header__search:"Header_header__search__wVi8J",alternative:"Header_alternative___RxIO"}},8037:function(e){e.exports={loader:"Loader_loader__7ZWW3"}},4245:function(e){e.exports={main:"Main_main__qK_Jw",details:"Main_details__abUpU","no-results":"Main_no-results__h5rsY",search:"Main_search__CtvuZ","details-active":"Main_details-active__MLTaW","main-list":"Main_main-list__1UbiS","card-background":"Main_card-background__S8eNT","card-small":"Main_card-small__gFnkk",alternative:"Main_alternative__gV084"}},2126:function(e){e.exports={pagination:"Pagination_pagination__MQWKm",alternative:"Pagination_alternative__QziKL"}},9282:function(e){e.exports={wrapper:"App_wrapper__woZth","main-content":"App_main-content__dWAXq"}},1720:function(e){e.exports={style:{fontFamily:"'__myFont_f901e0', '__myFont_Fallback_f901e0'"},className:"__className_f901e0"}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8254)}),_N_E=e.O()}]);